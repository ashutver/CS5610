<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Implementing Security</title>
    <script src="JS/angular.min.js"></script>
    <script src="JS/angular-route.js"></script>
    <script src="JS/angular-route.min.js"></script>
    <script src="JS/project01.js"></script>
    <script src="views/profile/profile.js"></script>
    <script src="views/login/login.js"></script>
    <script src="views/register/register.js"></script>
    <script src="views/workout/workout.js"></script>
    <script src="views/workoutdetail/workoutdetail.js"></script>
    <script src="views/exercise/exercise.js"></script>
    <script src="views/muscle/muscle.js"></script>
    <script src="views/exercisedetail/exercisedetail.js"></script>
    <script src="views/signup/signup.js"></script>
    <link href="css/bootstrap.css" rel="stylesheet" />
    <script src="JS/jquery.js"></script>
    <script src="JS/jquery-ui.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css">
</head>
<body ng-app="PassportApp" style="padding-top:40px">
    <div class="container" >
        <header>
            <h1 class="text-center">User comments on exercise detail page</h1>
        </header>
        <article>
            <div class="maindiv text-center">
                <div class="div-header"><h3> About the experiment</h3></div>
                <p>
                   I have started working on my project experiments. In this expeiment user needs to login and then can comment on
                    a exercise on a exercise detail page. user needs to login and can proceed to exercise detail where user can comment 
                    on a exercise.
                    username: "a", password:"a"
                </p>
                <hr />
            </div>
        </article>
        <nav class="navbar navbar-inverse navbar-fixed-top" ng-controller="navCntrl">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">Project name</a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">

                        <li><a href="#/home">Home</a></li>
                        <li ng-show ="currentUser"><a href="#/profile">Profile</a></li>
                        <li ng-show="currentUser"><a href="#/workout">Workout   </a></li>
                        <li><a href="#/exercise/">Exercises</a></li>
                        <li><a href="#/muscle/">Muscle</a></li>
                        <li><a href="#/equipment/">Equipment</a></li>
                        <li><a href="#/nutrition/">Nutrition</a></li>
                        <li ><a href="#/login">Login</a></li>
                        <li><a href="#/logout" ng-click="logout()">Logout</a></li>
                        <li ng-show="!currentUser"><a href="#/signup">Signup</a></li>
                    </ul>
                   </div><!--/.navbar-collapse -->
            </div>
        </nav>
        <div ng-view></div>
        <div class="maindiv">
           
            <h4> Code Snippet</h4>
            <hr />
            <pre>
                    Client side  >>
                           $scope.saveComment = function () {
                                var comment = { commentdesc: $scope.data, userid: userId };
                                $scope.comments.push(comment);
                                var exercise = {exerciseid :exerciseid , comment :  $scope.comments};
                                console.log(exercise);
                                $http.post("/api/exercisecomment/" + exerciseid, exercise)
                                .success( function(response){
                                    console.log(response);
                                });
                                $scope.data = null;
                        }
                         $http.get("/api/exercisecomment/" + exerciseid)
                            .success(function (response) {
                                if ( response.length > 0) {
                                    console.log(response[0].comment);
                                    $scope.comments = response[0].comment;
                                }
                            });
                    Server Side >>
                      app.post("/api/exercisecomment/:exerciseid", function (req, res) { 
                            var exerciseid = req.params.exerciseid;
                            var exercise = req.body;
                            console.log(exercise);
                            ExerciseModel.findOneAndUpdate(
                                         { exerciseid: exercise.exerciseid },
                                         { $push: { comment: exercise.comment } },
                                         { safe: true, upsert: true }, function (err, doc) {
                                             res.json(doc);
                                         }
                            )
                        });
                    
        </pre>
        </div>
        <hr />
        <div class="maindiv">
            <h4> Code Snippet Explanation</h4>
            <hr />
            <p>
              Here data will be called from a web service api. I am using a REST api and data is gathered from different apis and
                one json array object is created which is used to display data on screen.In this expeiment user needs to login and 
                  then can comment on
                    a exercise on a exercise detail page. user needs to login and can proceed to exercise detail where user can comment
                    on a exercise. here comments will be stored specific to an exercise.
            </p>
            <hr />
            <h4> Source Code</h4>
            <a href="http://net4.ccs.neu.edu/home/ashutver/fileview/Default.aspx?~/Experiments/ProjExp/LoginPassport07.html" target="_blank">HTML Source</a>
            <a href="http://net4.ccs.neu.edu/home/ashutver/fileview/Default.aspx?~/Experiments/ProjExp/JS/project01.js" target="_blank">JS Source</a>
            <a href="http://net4.ccs.neu.edu/home/ashutver/fileview/Default.aspx?~/Experiments/NodeJs/server.js" target="_blank">Server Source</a>
            <hr />
            <h4>Refrences</h4>
            <a href="https://nodejs.org/" target="_blank">Node</a>

            <hr />
        </div>
    </div>
</body>
</html>