<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Populate data using Angular</title>
    <script src="JS/angular.min.js"></script>
    <script src="JS/angular-route.js"></script>
    <script src="JS/angular-route.min.js"></script>
    <script src="JS/clientApp01.js"></script>
    <link href="css/bootstrap.css" rel="stylesheet" />
</head>
<body ng-app="DeveloperApp">
    <div class="container" ng-controller="DeveloperController">
        <header>
            <h1 class="text-center">Delete data using NodeJS</h1>
        </header>
        <article>
            <div class="maindiv text-center">
                <div class="div-header"><h3> About the experiment</h3></div>
                <p>
                    This experiment demonstrates the Node framework. Here I am using Node frameqwork to delete a row.
                    Intially I have created a table on UI that uses angular to call a service. this service will be created in
                    Node server and exposed. Using this service angular will collect data and populate the table on UI
                    User has an option to delete a record.
                </p>
                <hr />
            </div>
        </article>
      <table class="table table-striped" >
          <tbody>
              <tr>
                  <th>First Name</th>
                  <th> Last Name</th>
              </tr>
              <tr ng-repeat="developer in developers">
                  <td>{{developer.firstName}}</td>
                  <td>{{developer.lastName}}</td>
                  <td>
                      <button ng-click="removeDev($index)" class="btn btn-danger pull-right">
                          <span class="glyphicon glyphicon-remove"></span>
                      </button>
                  </td>
              </tr>
          </tbody>
      </table>
        <div class="maindiv">
           
            <h4> Code Snippet</h4>
            <hr />
            <pre>
                    Client side  >>
                      app.controller("DeveloperController",
                        function ($scope,$http) {
                            $scope.edit = null;
                            $http.get("/api/developer")
                            .success(function (response) {
                                $scope.developers = response;
                            });
                     $scope.removeDev = function (index) {
                        $http.delete("/api/developer/" + index)
                        .success(function (response) {
                            $scope.developers = response;
                        });
                    };
                  Server Side >>
                       app.get("/api/developer", function (req, res) {
                        res.json(developers);
                       });
                     app.delete("/api/developer/:id", function (req, res) {
                        var index = req.params.id;
                        developers.splice(index, 1);
                        res.json(developers);
                    });
                      
        </pre>
        </div>
        <hr />
        <div class="maindiv">
            <h4> Code Snippet Explanation</h4>
            <hr />
            <p>
                Here at client side I am using a controller and initally I will get all the records from the service. I will create the service
                that will return the static data  and this data will be collected by angular to show in table format. here I will call the service
                passing the index of the record to be deleted and at server we will use the model to delete that record from the array.
            </p>
            <hr />
            <h4> Source Code</h4>
            <a href="../../fileview/Default.aspx?~/Experiments/NodeJs/public/index02.html" target="_blank">HTML Source</a>
            <a href="../../fileview/Default.aspx?~/Experiments/NodeJs/public/clientApp01.js" target="_blank">JS Source</a>
            <a href="../../fileview/Default.aspx?~/Experiments/NodeJs/server.js" target="_blank">Server Source</a>
            <hr />
            <h4>Refrences</h4>
            <a href="https://nodejs.org/" target="_blank">Node</a>

            <hr />
        </div>
    </div>
</body>
</html>