<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Populate data using Angular</title>
    <script src="JS/angular.min.js"></script>
    <script src="JS/angular-route.js"></script>
    <script src="JS/angular-route.min.js"></script>
    <script src="JS/clientApp01.js"></script>
    <link href="css/bootstrap.css" rel="stylesheet" />
</head>
<body ng-app="DeveloperApp">
    <div class="container" ng-controller="DeveloperController">
        <header>
            <h1 class="text-center">Edit data using NodeJS</h1>
        </header>
        <article>
            <div class="maindiv text-center">
                <div class="div-header"><h3> About the experiment</h3></div>
                <p>
                    This experiment demonstrates the Node framework. Here I am using Node frameqwork to fetch static data.
                    Here User can edit a particular record and it will be persisted at server so after modifying if user refreshes
                    the page then also the changes will be reflected. 
                </p>
                <hr />
            </div>
        </article>
      <table class="table table-striped" >
          <tbody>
              <tr>
                  <th>First Name</th>
                  <th> Last Name</th>
              </tr>
              <tr>
                  <th>
                      <input ng-model="developer.firstName" class="form-control" />
                  </th>
                  <th>
                      <input ng-model="developer.lastName" class="form-control" />
                  </th>
                  <th>
                      <button ng-click="editD(developer)" ng-show="edit" class="btn  pull-right">
                          <span class="glyphicon glyphicon-ok"></span>
                      </button>
                      <button ng-click="add(developer)" ng-hide="edit" class="btn btn-success pull-right">
                          <span class="glyphicon glyphicon-plus"></span>
                      </button>
                  </th>
              </tr>
              <tr ng-repeat="developer in developers">
                  <td>{{developer.firstName}}</td>
                  <td>{{developer.lastName}}</td>
                  <td>
                      <button ng-click="removeDev($index)" class="btn btn-danger pull-right">
                          <span class="glyphicon glyphicon-remove"></span>
                      </button>
                      <button ng-click="select($index)" class="btn btn-default pull-right">
                          <span class="glyphicon glyphicon-pencil"></span>
                      </button>
                  </td>
              </tr>
          </tbody>
      </table>
        <div class="maindiv">
           
            <h4> Code Snippet</h4>
            <hr />
            <pre>
                    Client side  >>
                      app.controller("DeveloperController",
                        function ($scope,$http) {
                            $scope.edit = null;
                            $http.get("/api/developer")
                            .success(function (response) {
                                $scope.developers = response;
                            });
                     $scope.editD = function (developer) {
                        $http.put("/api/developer/" + $scope.developerId, developer)
                       .success(function (response) {
                           $scope.developers = response;
                       });
                        $scope.edit = undefined;
                        $scope.developer = {};
                        $scope.developerId = undefined;
                    }
                    
                  Server Side >>
                       app.get("/api/developer", function (req, res) {
                        res.json(developers);
                       });
                      app.put("/api/developer/:index", function (req, res) {
                        var obj = req.body;
                        developers[req.params.index] = obj;
                        res.json(developers);
                    });
        </pre>
        </div>
        <hr />
        <div class="maindiv">
            <h4> Code Snippet Explanation</h4>
            <hr />
            <p>
                Here at client side I am using a controller and initally I will get all the records from the service. I will create the service
                that will return the static data  and this data will be collected by angular to show in table format. here if a user edits a 
                record then that record is shown in textbox with an option to edit. user can edit and click on save. Now the index and new
                record will be sent to server where it will be persisted. 
            </p>
            <hr />
            <h4> Source Code</h4>
            <a href="../../fileview/Default.aspx?~/Experiments/NodeJs/public/index04.html" target="_blank">HTML Source</a>
            <a href="../../fileview/Default.aspx?~/Experiments/NodeJs/public/clientApp01.js" target="_blank">JS Source</a>
            <a href="../../fileview/Default.aspx?~/Experiments/NodeJs/server.js" target="_blank">Server Source</a>
            <hr />
            <h4>Refrences</h4>
            <a href="https://nodejs.org/" target="_blank">Node</a>

            <hr />
        </div>
    </div>
</body>
</html>