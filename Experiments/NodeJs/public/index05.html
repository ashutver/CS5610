<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Populate data using Angular</title>
    <script src="JS/angular.min.js"></script>
    <script src="JS/angular-route.js"></script>
    <script src="JS/angular-route.min.js"></script>
    <script src="JS/clientApp02.js"></script>
    <link href="css/bootstrap.css" rel="stylesheet" />
</head>
<body ng-app="DeveloperApp">
    <div class="container" ng-controller="DeveloperController">
        <header>
            <h1 class="text-center">Routing using Angular and fetch data using NodeJS</h1>
        </header>
        <article>
            <div class="maindiv text-center">
                <div class="div-header"><h3> About the experiment</h3></div>
                <p>
                    This experiment demonstrates the Node framework. Here I am using Node frameqwork to fetch static data.
                    Intially I have created a table on UI that uses angular to call a service. Here I have used routing. for every
                    record there will be a details page. user can click on details for any record to view the details page for that
                    record.
                </p>
                <hr />
            </div>
        </article>
        <div ng-view></div>
        <div class="maindiv">
           
            <h4> Code Snippet</h4>
            <hr />
            <pre>
                    Client side  >>
                      app.config(['$routeProvider',
                          function ($routeProvider) {
                              $routeProvider.
                                when('/developer', {
                                    templateUrl: 'developerApp/home.html',
                                    controller: 'homeController'
                                }).
                                when('/developer/:id', {
                                    templateUrl: 'developerApp/details.html',
                                    controller: 'detailsController'
                                }).
                                otherwise({
                                    redirectTo: '/developer'
                                });
                          }]);

                           app.controller("homeController",
                                function ($scope,$http) {
                                    $scope.edit = null;
                                    $http.get("/api/developer")
                                    .success(function (response) {
                                        $scope.developers = response;
                                    });
                           app.controller("detailsController", function ($scope, $http, $routeParams) {
                                var index = $routeParams.id;
                                $http.get("/api/developer/" + index)
                                .success(function (response) {
                                    $scope.developer = response;
                                });
                            });

                  Server Side >>
                       app.get("/api/developer", function (req, res) {
                        res.json(developers);
                         });
                       app.get("/api/developer/:index", function (req, res) {
                                var idx = req.params['index'];
                                res.json(developers[idx]);
                        });
        </pre>
        </div>
        <hr />
        <div class="maindiv">
            <h4> Code Snippet Explanation</h4>
            <hr />
            <p>
                Here at client side I am using a controller and initally I will get all the records from the service. I will create the service
                that will return the static data  and this data will be collected by angular to show in table format. Here I have declared 
                controllers and initally an record will be shown using homeController and once user clicks on detail icon then index of that
                particular record will be sent to details controller and user details will be fetched and sent back to user.
            </p>
            <hr />
            <h4> Source Code</h4>
            <a href="../../fileview/Default.aspx?~/Experiments/NodeJs/public/index05.html" target="_blank">HTML Source</a>
            <a href="../../fileview/Default.aspx?~/Experiments/NodeJs/public/clientApp02.js" target="_blank">JS Source</a>
            <a href="../../fileview/Default.aspx?~/Experiments/NodeJs/server.js" target="_blank">Server Source</a>
            <hr />
            <h4>Refrences</h4>
            <a href="https://nodejs.org/" target="_blank">Node</a>

            <hr />
        </div>
    </div>
</body>
</html>